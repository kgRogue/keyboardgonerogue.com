<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Screen Recording | Keyboard Gone Rogue</title>
<meta name=keywords content="build,rabbit-hole,tool"><meta name=description content="ffmpeg Usage"><meta name=author content="Me"><link rel=canonical href=https://keyboardgonerogue.com/posts/rabbit-holes/screen-recording/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://keyboardgonerogue.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://keyboardgonerogue.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://keyboardgonerogue.com/favicon-32x32.png><link rel=apple-touch-icon href=https://keyboardgonerogue.com/apple-touch-icon.png><link rel=mask-icon href=https://keyboardgonerogue.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://keyboardgonerogue.com/posts/rabbit-holes/screen-recording/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Screen Recording"><meta property="og:description" content="ffmpeg Usage"><meta property="og:type" content="article"><meta property="og:url" content="https://keyboardgonerogue.com/posts/rabbit-holes/screen-recording/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-06-16T11:25:49+05:30"><meta property="article:modified_time" content="2024-06-16T11:25:49+05:30"><meta name=twitter:card content="summary"><meta name=twitter:title content="Screen Recording"><meta name=twitter:description content="ffmpeg Usage"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://keyboardgonerogue.com/posts/"},{"@type":"ListItem","position":2,"name":"Screen Recording","item":"https://keyboardgonerogue.com/posts/rabbit-holes/screen-recording/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Screen Recording","name":"Screen Recording","description":"ffmpeg Usage","keywords":["build","rabbit-hole","tool"],"articleBody":"üöÄ A Deep Dive into Screen Recording on macOS with ChatGPT and ffmpeg! Ever wondered how to capture your screen activity on a Mac? Well, I had a delightful chat with ChatGPT that turned into a mini-masterclass on using ffmpeg for screen recording. Here‚Äôs a fun recap of our conversation and what I learned along the way!\nü§Ø Quick Summary: Chatting with ChatGPT Me: Hey, how can I record my screen on macOS?\nChatGPT: You can use ffmpeg! It‚Äôs a robust command-line tool perfect for recording and converting multimedia. Try this command:\nffmpeg -f avfoundation -i \"1\" output.mp4 Make sure to adjust the -i parameter to match your screen. This method is not only straightforward but also highly customizable.\nüé¨ Insights Gained from ffmpeg Embarking on a journey of continuous screen recording, I quickly recognized the potential strain on my battery and the looming threat to my disk space. Fortunately, ffmpeg emerged as a hero, equipped with a suite of clever techniques to mitigate these concerns.\nüé• Frame Rate Magic Inspired by Rewind.ai, I decided to capture one frame every two seconds to save on resources. Here‚Äôs how you can do it:\nffmpeg -f avfoundation -framerate 0.5 -i \"1\" output.mp4 The -framerate flag here is your golden ticket to controlling the input frame rate. Lowering the frame rate means fewer frames to process and store, which significantly reduces the load on your system. it sets drops the framerate as much as the device avfoundation allows. So for me setting this to 0.5, set it to 4 FPS.\nüìâ Choosing the Right Resolution To further reduce the load, I opted for a lower resolution. Choose 1080p as this is good default and high-res enough that retina display when scaled down to this, the text is still legible. Here‚Äôs the command:\nffmpeg -f avfoundation -i \"1\" -framerate 0.5 -s hd1080 output.mp4 I faced a decision between using -s for immediate scaling or -vf for filter-based scaling during processing. I chose -s for its straightforward approach to reduce the processing load. The -s option scales the video before encoding, offering a less CPU-intensive route compared to -vf, which applies filters during the encoding process. However, I later transitioned back to using -vf for its advanced filtering capabilities.\nüöÄ Turbo-Charged Encoding with Hardware Acceleration Since I‚Äôm using a Mac with Apple Silicon, I leveraged built-in hardware acceleration for encoding to the h.265 (HEVC) format, which offers better compression and quality for the same file size compared to h.264:\nffmpeg -f avfoundation -i \"1\" -framerate 0.5 -s hd1080 -c:v hevc_videotoolbox output.mp4 hevc_videotoolbox: Utilizes Apple‚Äôs hardware acceleration for efficient encoding. Following Setting only work for Software Encoding and not for hardware accelerated encoding. So could not use them.\ncrf (Constant Rate Factor): Balances quality and compression, with values ranging from 18 (near lossless) to 50 (lower quality). I opted for 28 as a middle ground for decent quality without excessive file size. preset: Influences the encoding speed and efficiency. Options include medium, slow, and very slow. I selected slow to optimize file size without overly taxing the processor. While very slow achieves the smallest file size, it significantly increases processing demands and battery usage. üîÑ Handling Variable Frame Rate While dynamic frame rate adjustments are great, they don‚Äôt mesh well with hardware acceleration. So, I stuck with raw encoding, which isn‚Äôt perfect but gets the job done. This was the only way to setup the required presets and variable framerate:\nffmpeg -f avfoundation -i \"1\" -framerate 0.5 -s hd1080 -c:v hevc_videotoolbox -fps_mode vfr -b:v 2K -maxrate 2K -bufsize 8K output.mp4 I could choose a very low framerate, as mostly i wanted to concentrate on static details and text. This kept the file decently low.\nüõ†Ô∏è Alternative: Software Encoding with libx265 For those situations where hardware acceleration conflicts with the need for dynamic frame rate adjustments, switching to software encoding with libx265 offers a viable alternative. This approach allows for more flexibility in handling variable frame rates:\nffmpeg -f avfoundation -i \"1\" -framerate 0.5 -s hd1080 -c:v libx265 -crf 28 -x265-params \"keyint=120:min-keyint=20:no-scenecut\" -preset slow output.mp4 libx265: Engages the x265 encoder, a software-based HEVC encoder that provides fine-grained control over the encoding process. x265-params: Allows for detailed configuration of the encoder. The keyint and min-keyint parameters control the maximum and minimum interval between IDR-frames, optimizing for variable frame rate content. The no-scenecut option disables scene cut detection, which can be beneficial for maintaining a consistent encoding strategy across varying content. This software-based approach, while more CPU-intensive, grants the flexibility needed for precise control over video quality and file size, making it an excellent choice for projects requiring dynamic frame rate adjustments.\nüõ†Ô∏è Tweaking the Defaults Setting a keyframe interval is crucial for maintaining detailed captures, especially over long periods. I set mine to every 5 minutes. The faststart flag ensures that video metadata is positioned at the beginning for quick playback startup:\nffmpeg -f avfoundation -i \"1\" -framerate 0.5 -s hd1080 -c:v hevc_videotoolbox -g 150 -fps_mode vfr -b:v 2K -maxrate 2K -bufsize 8K -movflags +faststart output.mp4 üåì Going Grayscale for Extra Savings Since I mostly code in a light theme, converting the video to grayscale seemed like a smart move to further reduce file size:\nffmpeg -f avfoundation -i \"1\" -framerate 0.5 -vf \"format=gray,scale=-1:1080\" -c:v hevc_videotoolbox -g 150 -fps_mode vfr -b:v 2K -maxrate 2K -bufsize 8K -movflags +faststart output.mp4 Reduced File Size: By eliminating color information, the video file size is significantly reduced. This is particularly beneficial for long recording sessions where storage space can become a concern. Resource Efficiency: Grayscale conversion is less resource-intensive compared to other color adjustments. This means less CPU and memory usage during the encoding process. Visual Clarity: For coding sessions, where the primary focus is on text and static details, grayscale is sufficient. It ensures that the essential details remain clear and visible without the need for full-color video. Combining Scaling with Grayscale Conversion By combining scaling with grayscale conversion in the filtering stage, we streamline the encoding process, making it more efficient. Here‚Äôs how:\nScaling: Reducing the resolution of the video to 1080p ensures that the file size is manageable while maintaining sufficient detail for readability. This is particularly important for screen recordings where text clarity is crucial. Grayscale Conversion: The format=gray filter simplifies the video by removing color information, which not only reduces the file size but also speeds up the encoding process. Code Commentary\n-vf \"format=gray,scale=-1:1080\": This part of the command applies the grayscale filter and scales the video to 1080p. -c:v hevc_videotoolbox: Utilizes Apple‚Äôs hardware acceleration for efficient encoding. -b:v 2K -maxrate 2K -bufsize 8K: These parameters control the bitrate and buffer size, ensuring a balance between quality and file size. -movflags +faststart: Ensures that the video metadata is positioned at the beginning of the file for quick playback startup. By integrating these techniques, we achieve a highly efficient and resource-friendly screen recording setup that meets the specific needs of coding sessions. This approach not only saves on disk space but also ensures that the essential details remain clear and visible without the need for full-color video.\nüõ†Ô∏è Optimizing Output Frame Rate The -r flag is typically used to control the output frame rate, but it can result in a high amount of data being processed. To manage this more efficiently, we need to focus on the filter stage, which is controlled by the -vf (video filter) option.\nBy using the -vf option, we can precisely control the frame rate during the filtering stage, ensuring that only the necessary frames are processed. This approach reduces the load on the system and optimizes the overall encoding process.\nHere‚Äôs the command that achieves this:\nffmpeg -f avfoundation -i \"1\" -framerate 0.5 -vf \"fps=0.5,format=gray,scale=-1:1080\" -fps_mode vfr -c:v hevc_videotoolbox -b:v 2K -maxrate 2K -bufsize 8K -movflags +faststart output.mp4 Code Commentary\n-vf \"fps=0.5,format=gray,scale=-1:1080\": This part of the command applies multiple filters: fps=0.5: Captures one frame every two seconds, significantly reducing the amount of data processed. format=gray: Converts the video to grayscale, reducing file size and processing load. scale=-1:1080: Scales the video to 1080p, ensuring a balance between quality and file size. -fps_mode vfr: Enables variable frame rate mode, which is more efficient for screen recordings with varying content. -c:v hevc_videotoolbox: Utilizes Apple‚Äôs hardware acceleration for efficient encoding. -b:v 2K -maxrate 2K -bufsize 8K: These parameters control the bitrate and buffer size, ensuring a balance between quality and file size. -movflags +faststart: Ensures that the video metadata is positioned at the beginning of the file for quick playback startup. By implementing these optimizations, we can achieve a more efficient and resource-friendly screen recording setup. This approach not only reduces the load on the system but also ensures that the essential details remain clear and visible, making it ideal for coding sessions and other screen recording tasks.\nüîß Enhancing Input Flow for Hardware Decoding To optimize the input flow and leverage hardware decoding, we made some crucial adjustments to the ffmpeg command:\nffmpeg -f avfoundation -framerate 0.5 -pixel_format nv12 -i \"2:none\" -vf \"fps=0.5,format=gray,scale=-1:1080\" -fps_mode vfr -c:v hevc_videotoolbox -b:v 2K -maxrate 2K -bufsize 8K -movflags +faststart output.mp4 Key Adjustments\nPixel Format: -pixel_format nv12: We chose nv12 because it is compatible with hardware acceleration. This format ensures that the video processing is optimized for performance, reducing the load on the CPU and taking advantage of the GPU. Input Source: -i \"2:none\": This specifies that the second device is used for video capture, and no audio is captured. This is particularly useful for screen recording where audio is not required, further reducing the processing load. Listing Available Devices To identify the correct input device, you can list all available devices using the following command:\nffmpeg -f avfoundation -list_devices true -i \"\" This command will display a list of all video and audio capture devices connected to your system, allowing you to select the appropriate device for your recording needs.\nüìà Optimizing the Output Stream ffmpeg -f avfoundation -framerate 0.5 -pixel_format nv12 -i \"2:none\" -vf \"fps=0.5,format=gray,scale=-1:1080\" -fps_mode -an vfr -c:v hevc_videotoolbox -b:v 2K -maxrate 2K -bufsize 8K -movflags +faststart output.mp4 Audio Handling:\n-an: Ensures that no audio track is included in the output. This is useful for screen recordings where audio is not needed, further reducing the file size and processing requirements. üé• Enhancing Video Quality To further improve the video quality, we made several key adjustments to the ffmpeg command:\nffmpeg -f avfoundation -framerate 0.5 -pixel_format nv12 -i \"2:none\" -vf \"fps=0.5,format=gray,scale=-1:1080,setrange=full,unsharp=5:5:1.3,format=yuv420p\" -fps_mode -an vfr -c:v hevc_videotoolbox -b:v 2K -maxrate 2K -bufsize 8K -movflags +faststart output.mp4 Key Adjustments and Their Importance The changes and the order in the -vf (video filter) flag are crucial. The order defines the linear execution flow, ensuring that each step is processed correctly and efficiently. Here‚Äôs a detailed breakdown: Frame Rate Control: fps=0.5: This ensures that only one frame every two seconds is processed, regardless of the input device‚Äôs frame rate. This significantly reduces the amount of data processed, optimizing the workflow. Grayscale Conversion: format=gray: Converts the video to grayscale, removing extra color channels. This step reduces the file size and processing load, making the encoding process more efficient. Scaling: scale=-1:1080: Scales the video to 1080p, ensuring a balance between quality and file size. This is particularly important for screen recordings where text clarity is crucial. Color Range Adjustment: setrange=full: This step is a prerequisite for the unsharp filter. It ensures that the full color range is used, which is necessary for the subsequent sharpening process. Sharpening: unsharp=5:5:1.3: This filter improves text legibility by sharpening the video. This is particularly useful for screen recordings where clear text is essential. Final Format Conversion: format=yuv420p: Converts the video to a format supported by the hardware encoder. This step ensures compatibility and efficient encoding. Importance of Filter Order The order of the filters in the -vf flag is critical because each filter processes the output of the previous one. This linear execution flow ensures that each step is applied correctly and efficiently: First, the frame rate is reduced to ensure that only the necessary frames are processed. Next, the video is converted to grayscale, simplifying the data and reducing the file size. Then, the video is scaled to the desired resolution, ensuring clarity and manageability. After that, the color range is adjusted to prepare for sharpening. Subsequently, the sharpening filter is applied to enhance text legibility. Finally, the video is converted to a format supported by the hardware encoder, ensuring efficient encoding. üõ°Ô∏è Making the Recording Resilient to Interruptions To ensure that our screen recording process is resilient to interruptions, such as system crashes or unexpected shutdowns, we made several key adjustments to the ffmpeg command:\nffmpeg -f avfoundation -framerate 0.5 -pixel_format nv12 -i \"2:none\" -vf \"fps=0.5,format=gray,scale=-1:1080,setrange=full,unsharp=5:5:1.3,format=yuv420p\" -fps_mode vfr -an -c:v hevc_videotoolbox -b:v 2K -maxrate 2K -bufsize 8K -movflags +frag_keyframe+empty_moov+default_base_moof -g 150 -f segment -segment_time 3600 -reset_timestamps 1 -strftime 1 \"%Y-%m-%d_%H-%M-%S_%A_%B_%d.mp4\" MOV Flags: -movflags +frag_keyframe+empty_moov+default_base_moof: These flags are crucial for making the recording process more resilient: +frag_keyframe: Creates a fragment at each keyframe, ensuring that the video can be played back even if the recording is interrupted. +empty_moov: Writes an empty moov atom at the beginning of the file for compatibility, which is essential for fragmented MP4 files. +default_base_moof: Uses the default base data offset for movie fragments, ensuring proper playback in fragmented MP4 files. These flags help create internal segments at the start of each keyframe. If ffmpeg gets interrupted, only the last segment from the last keyframe to the time of interruption will get corrupted. This means a maximum of 5 minutes of recording will be lost, which is an acceptable trade-off for most use cases. Segmenting the Recording: -f segment -segment_time 3600 -reset_timestamps 1 -strftime 1 \"%Y-%m-%d_%H-%M-%S_%A_%B_%d.mp4\": This option segments the recording into new files every hour. This approach ensures that if an interruption or corruption occurs, it will only affect the last file, minimizing data loss. ‚öôÔ∏è My Setup As an avid Alfred user, I prefer to streamline my workflow rather than manually setting up and controlling the recording process via the terminal each time. To achieve this, I created a custom Alfred workflow with three essential commands.\nüöÄ Start Recording #!/bin/bash query=$1 # Function to convert a string to camel case and make it safe for file names to_camel_case() { local input=\"$1\" # Replace non-alphanumeric characters with spaces input=$(echo \"$input\" | sed -r 's/[^a-zA-Z0-9]+/ /g') # Convert to lowercase input=$(echo \"$input\" | tr '[:upper:]' '[:lower:]') # Capitalize the first letter of each word input=$(echo \"$input\" | awk '{for(i=1;i\u003c=NF;i++) $i=toupper(substr($i,1,1)) tolower(substr($i,2))} 1') # Remove spaces to form a camel case string input=$(echo \"$input\" | tr -d ' ') # Remove any remaining special characters to make it safe for file names input=$(echo \"$input\" | sed -r 's/[^a-zA-Z0-9]//g') echo \"$input\" } # Check if query is not empty if [ ! -z \"$query\" ]; then camel_case_query=$(to_camel_case \"$query\") file_postfix=\"_${camel_case_query}\" else file_postfix=\"\" fi # Directory to store PID file and recordings WORKFLOW_DATA_DIR=\"$alfred_workflow_data\" PID_FILE=\"$WORKFLOW_DATA_DIR/ffmpeg.pid\" RECORDING_DIR=\"$WORKFLOW_DATA_DIR/recording\" LOG_FILE=\"$WORKFLOW_DATA_DIR/start_ffmpeg.log\" # Create the recording directory if it doesn't exist mkdir -p \"$RECORDING_DIR\" # Clear the log file echo \"\" \u003e \"$LOG_FILE\" # Log a message echo \"Starting ffmpeg script...\" \u003e\u003e \"$LOG_FILE\" # Check if the PID file exists and if the process is running if [ -f \"$PID_FILE\" ] \u0026\u0026 kill -0 $(cat \"$PID_FILE\") 2\u003e/dev/null; then echo \"ffmpeg is already running.\" \u003e\u003e \"$LOG_FILE\" echo \"ffmpeg is already running.\" exit 1 # Return code 1 indicates ffmpeg is already running fi # Start the ffmpeg process in the background using nohup and save the PID nohup ffmpeg -f avfoundation -framerate 0.5 -pixel_format nv12 -i \"2:none\" -vf \"fps=0.5,format=gray,scale=-1:1080,setrange=full,unsharp=5:5:1.3,format=yuv420p\" -fps_mode vfr -an -c:v hevc_videotoolbox -b:v 2K -maxrate 2K -bufsize 8K -movflags +frag_keyframe+empty_moov+default_base_moof -g 150 -f segment -segment_time 3600 -reset_timestamps 1 -strftime 1 \"$RECORDING_DIR/%Y-%m-%d_%H-%M-%S_%A_%B_%d${file_prefix}.mp4\" \u003e /dev/null 2\u003e\u00261 \u0026 FFMPEG_PID=$! echo $FFMPEG_PID \u003e \"$PID_FILE\" echo \"ffmpeg started with PID $FFMPEG_PID.\" \u003e\u003e \"$LOG_FILE\" echo \"ffmpeg started with PID $FFMPEG_PID.\" exit 0 # Return code 0 indicates success Code Commentary\nnohup: Ensures the ffmpeg process ignores hangup signals and continues running even after the script exits. Output Redirection: \u003e /dev/null 2\u003e\u00261 ensures that the output of the ffmpeg process does not interfere with the script and is discarded. Background Process: The \u0026 at the end of the command starts the command as a background process. Save PID: The PID of the ffmpeg process is captured using $! and saved to a file. Logging: The script logs messages to the log file and outputs the PID to Alfred. üõë Stop Recording #!/bin/bash # Directory to store PID file WORKFLOW_DATA_DIR=\"$alfred_workflow_data\" PID_FILE=\"$WORKFLOW_DATA_DIR/ffmpeg.pid\" # Check if the PID file exists and if the process is running if [ -f \"$PID_FILE\" ]; then FFMPEG_PID=$(cat \"$PID_FILE\") if kill -0 $FFMPEG_PID 2\u003e/dev/null; then kill -SIGINT $FFMPEG_PID echo \"ffmpeg process $FFMPEG_PID stopped.\" rm \"$PID_FILE\" exit 0 # Return code 0 indicates success else echo \"ffmpeg process not running, cleaning up.\" rm \"$PID_FILE\" exit 1 # Return code 1 indicates the process was not running fi else echo \"No ffmpeg process running.\" exit 1 # Return code 1 indicates no PID file found fi üìÇ Open Recording Directory #!/bin/bash # Directory to open in Finder RECORDING_DIR=\"$alfred_workflow_data/recording\" # Create the recording directory if it doesn't exist mkdir -p \"$RECORDING_DIR\" # Open the recording directory in Finder open \"$RECORDING_DIR\" By integrating these commands into an Alfred workflow, I can easily start, stop, and access my screen recordings without having to manually enter commands in the terminal. This setup not only saves time but also ensures a seamless recording experience.\nüåü Reflecting on the Journey Embarking on this adventure with ffmpeg and ChatGPT has not only addressed my screen recording requirements but also opened up a whole new world of video processing insights. ffmpeg stands out as an incredibly versatile toolkit for anyone interested in multimedia, offering a wide range of possibilities for both novices and experts. It‚Äôs an invitation to explore, experiment, and enhance your skills.\nKey Takeaways Optimizing Screen Recording:\nBy leveraging ffmpeg‚Äôs powerful command-line capabilities, we optimized screen recording on macOS, focusing on efficiency and quality. Techniques such as grayscale conversion, frame rate control, hardware decoding, and output stream optimization were crucial in achieving a resource-friendly setup. Enhancing Video Quality:\nWe implemented advanced filters and settings to ensure high-quality recordings. The importance of filter order was highlighted, ensuring each step in the video processing pipeline was executed correctly and efficiently. Resilience to Interruptions:\nBy adding specific MOV flags and segmenting the recording, we made the recording process resilient to interruptions. This approach minimizes data loss and ensures the majority of the recording remains intact. Streamlined Workflow with Alfred:\nAs an avid Alfred user, I created a custom workflow to start, stop, and access recordings seamlessly. This setup saves time and ensures a smooth recording experience without manual terminal commands. Future Plans This experience has also solidified my intention to integrate GPT as a collaborative programming companion. In pursuit of this, I plan to leverage the following tools:\nCursor from Cursor.so: As an enthusiastic Visual Studio Code user, I find Cursor‚Äôs addition of simple, GPT-friendly interfaces to be a game-changer, making it easier to interact with GPT during coding sessions. ChatGPT 4.0 and GPT-4: These advanced iterations of GPT promise to revolutionize the way I approach problem-solving and coding, offering unparalleled assistance and insights. Final Thoughts This journey has been a testament to the power of combining cutting-edge tools and technologies to push the boundaries of what‚Äôs possible in programming and video editing. By integrating ffmpeg‚Äôs robust capabilities with the advanced assistance of ChatGPT, we have created a highly efficient and effective screen recording setup tailored for coding sessions and beyond.\nThe exploration and experimentation with these tools have not only enhanced my technical skills but also opened up new avenues for creative and efficient workflows. I look forward to continuing this journey, leveraging the latest advancements in technology to further refine and optimize my processes.\nThank you for joining me on this deep dive into screen recording with ffmpeg and ChatGPT. I hope you found these insights and techniques as valuable and exciting as I did. Happy recording!\n","wordCount":"3331","inLanguage":"en","datePublished":"2024-06-16T11:25:49+05:30","dateModified":"2024-06-16T11:25:49+05:30","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://keyboardgonerogue.com/posts/rabbit-holes/screen-recording/"},"publisher":{"@type":"Organization","name":"Keyboard Gone Rogue","logo":{"@type":"ImageObject","url":"https://keyboardgonerogue.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://keyboardgonerogue.com/ accesskey=h title="Home (Alt + H)"><img src=https://keyboardgonerogue.com/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://keyboardgonerogue.com/archives title=Archive><span>Archive</span></a></li><li><a href=https://keyboardgonerogue.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://keyboardgonerogue.com/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://keyboardgonerogue.com/>Home</a>&nbsp;¬ª&nbsp;<a href=https://keyboardgonerogue.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Screen Recording</h1><div class=post-description>ffmpeg Usage</div><div class=post-meta><span title='2024-06-16 11:25:49 +0530 IST'>June 16, 2024</span>&nbsp;¬∑&nbsp;16 min&nbsp;¬∑&nbsp;3331 words&nbsp;¬∑&nbsp;Me</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#-a-deep-dive-into-screen-recording-on-macos-with-chatgpt-and-ffmpeg>üöÄ A Deep Dive into Screen Recording on macOS with ChatGPT and ffmpeg!</a></li><li><a href=#-quick-summary-chatting-with-chatgpt>ü§Ø Quick Summary: Chatting with ChatGPT</a></li><li><a href=#-insights-gained-from-ffmpeg>üé¨ Insights Gained from ffmpeg</a><ul><li><a href=#-frame-rate-magic>üé• Frame Rate Magic</a></li><li><a href=#-choosing-the-right-resolution>üìâ Choosing the Right Resolution</a></li><li><a href=#-turbo-charged-encoding-with-hardware-acceleration>üöÄ Turbo-Charged Encoding with Hardware Acceleration</a></li><li><a href=#-handling-variable-frame-rate>üîÑ Handling Variable Frame Rate</a></li><li><a href=#-tweaking-the-defaults>üõ†Ô∏è Tweaking the Defaults</a></li><li><a href=#-going-grayscale-for-extra-savings>üåì Going Grayscale for Extra Savings</a></li><li><a href=#-optimizing-output-frame-rate>üõ†Ô∏è Optimizing Output Frame Rate</a></li><li><a href=#-enhancing-input-flow-for-hardware-decoding>üîß Enhancing Input Flow for Hardware Decoding</a></li><li><a href=#-optimizing-the-output-stream>üìà Optimizing the Output Stream</a></li><li><a href=#-enhancing-video-quality>üé• Enhancing Video Quality</a></li><li><a href=#-making-the-recording-resilient-to-interruptions>üõ°Ô∏è Making the Recording Resilient to Interruptions</a></li></ul></li><li><a href=#-my-setup>‚öôÔ∏è My Setup</a><ul><li><a href=#-start-recording>üöÄ Start Recording</a></li><li><a href=#-stop-recording>üõë Stop Recording</a></li><li><a href=#-open-recording-directory>üìÇ Open Recording Directory</a></li></ul></li><li><a href=#-reflecting-on-the-journey>üåü Reflecting on the Journey</a><ul><li><a href=#key-takeaways>Key Takeaways</a></li><li><a href=#future-plans>Future Plans</a></li><li><a href=#final-thoughts>Final Thoughts</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h2 id=-a-deep-dive-into-screen-recording-on-macos-with-chatgpt-and-ffmpeg>üöÄ A Deep Dive into Screen Recording on macOS with ChatGPT and ffmpeg!<a hidden class=anchor aria-hidden=true href=#-a-deep-dive-into-screen-recording-on-macos-with-chatgpt-and-ffmpeg>#</a></h2><p>Ever wondered how to capture your screen activity on a Mac? Well, I had a delightful chat with ChatGPT that turned into a mini-masterclass on using ffmpeg for screen recording. Here&rsquo;s a fun recap of our conversation and what I learned along the way!</p><h2 id=-quick-summary-chatting-with-chatgpt>ü§Ø Quick Summary: Chatting with ChatGPT<a hidden class=anchor aria-hidden=true href=#-quick-summary-chatting-with-chatgpt>#</a></h2><p><strong>Me</strong>: Hey, how can I record my screen on macOS?</p><p><strong>ChatGPT</strong>: You can use ffmpeg! It&rsquo;s a robust command-line tool perfect for recording and converting multimedia. Try this command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ffmpeg -f avfoundation -i <span class=s2>&#34;1&#34;</span> output.mp4
</span></span></code></pre></div><p>Make sure to adjust the -i parameter to match your screen. This method is not only straightforward but also highly customizable.</p><h2 id=-insights-gained-from-ffmpeg>üé¨ Insights Gained from ffmpeg<a hidden class=anchor aria-hidden=true href=#-insights-gained-from-ffmpeg>#</a></h2><p>Embarking on a journey of continuous screen recording, I quickly recognized the potential strain on my battery and the looming threat to my disk space. Fortunately, ffmpeg emerged as a hero, equipped with a suite of clever techniques to mitigate these concerns.</p><h3 id=-frame-rate-magic>üé• Frame Rate Magic<a hidden class=anchor aria-hidden=true href=#-frame-rate-magic>#</a></h3><p>Inspired by Rewind.ai, I decided to capture one frame every two seconds to save on resources. Here&rsquo;s how you can do it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ffmpeg -f avfoundation -framerate 0.5 -i <span class=s2>&#34;1&#34;</span> output.mp4
</span></span></code></pre></div><p>The <code>-framerate</code> flag here is your golden ticket to controlling the input frame rate. Lowering the frame rate means fewer frames to process and store, which significantly reduces the load on your system. it sets drops the framerate as much as the device <code>avfoundation</code> allows. So for me setting this to 0.5, set it to 4 FPS.</p><h3 id=-choosing-the-right-resolution>üìâ Choosing the Right Resolution<a hidden class=anchor aria-hidden=true href=#-choosing-the-right-resolution>#</a></h3><p>To further reduce the load, I opted for a lower resolution. Choose 1080p as this is good default and high-res enough that retina display when scaled down to this, the text is still legible. Here&rsquo;s the command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ffmpeg -f avfoundation -i <span class=s2>&#34;1&#34;</span> -framerate 0.5 -s hd1080 output.mp4
</span></span></code></pre></div><p>I faced a decision between using <code>-s</code> for immediate scaling or <code>-vf</code> for filter-based scaling during processing. I chose <code>-s</code> for its straightforward approach to reduce the processing load. The <code>-s</code> option scales the video before encoding, offering a less CPU-intensive route compared to <code>-vf</code>, which applies filters during the encoding process. However, I later transitioned back to using <code>-vf</code> for its advanced filtering capabilities.</p><h3 id=-turbo-charged-encoding-with-hardware-acceleration>üöÄ Turbo-Charged Encoding with Hardware Acceleration<a hidden class=anchor aria-hidden=true href=#-turbo-charged-encoding-with-hardware-acceleration>#</a></h3><p>Since I&rsquo;m using a Mac with Apple Silicon, I leveraged built-in hardware acceleration for encoding to the h.265 (HEVC) format, which offers better compression and quality for the same file size compared to h.264:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ffmpeg -f avfoundation -i <span class=s2>&#34;1&#34;</span> -framerate 0.5 -s hd1080 -c:v hevc_videotoolbox output.mp4
</span></span></code></pre></div><ul><li><strong>hevc_videotoolbox</strong>: Utilizes Apple&rsquo;s hardware acceleration for efficient encoding.</li></ul><p>Following Setting only work for Software Encoding and not for hardware accelerated encoding. So could not use them.</p><ul><li><strong>crf (Constant Rate Factor)</strong>: Balances quality and compression, with values ranging from 18 (near lossless) to 50 (lower quality). I opted for 28 as a middle ground for decent quality without excessive file size.</li><li><strong>preset</strong>: Influences the encoding speed and efficiency. Options include <code>medium</code>, <code>slow</code>, and <code>very slow</code>. I selected <code>slow</code> to optimize file size without overly taxing the processor. While <code>very slow</code> achieves the smallest file size, it significantly increases processing demands and battery usage.</li></ul><h3 id=-handling-variable-frame-rate>üîÑ Handling Variable Frame Rate<a hidden class=anchor aria-hidden=true href=#-handling-variable-frame-rate>#</a></h3><p>While dynamic frame rate adjustments are great, they don&rsquo;t mesh well with hardware acceleration. So, I stuck with raw encoding, which isn&rsquo;t perfect but gets the job done. This was the only way to setup the required presets and variable framerate:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ffmpeg -f avfoundation -i <span class=s2>&#34;1&#34;</span> -framerate 0.5 -s hd1080 -c:v hevc_videotoolbox -fps_mode vfr -b:v 2K -maxrate 2K -bufsize 8K output.mp4
</span></span></code></pre></div><p>I could choose a very low framerate, as mostly i wanted to concentrate on static details and text. This kept the file decently low.</p><h4 id=-alternative-software-encoding-with-libx265>üõ†Ô∏è Alternative: Software Encoding with libx265<a hidden class=anchor aria-hidden=true href=#-alternative-software-encoding-with-libx265>#</a></h4><p>For those situations where hardware acceleration conflicts with the need for dynamic frame rate adjustments, switching to software encoding with <code>libx265</code> offers a viable alternative. This approach allows for more flexibility in handling variable frame rates:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ffmpeg -f avfoundation -i <span class=s2>&#34;1&#34;</span> -framerate 0.5 -s hd1080 -c:v libx265 -crf <span class=m>28</span> -x265-params <span class=s2>&#34;keyint=120:min-keyint=20:no-scenecut&#34;</span> -preset slow output.mp4
</span></span></code></pre></div><ul><li><strong>libx265</strong>: Engages the x265 encoder, a software-based HEVC encoder that provides fine-grained control over the encoding process.</li><li><strong>x265-params</strong>: Allows for detailed configuration of the encoder. The <code>keyint</code> and <code>min-keyint</code> parameters control the maximum and minimum interval between IDR-frames, optimizing for variable frame rate content. The <code>no-scenecut</code> option disables scene cut detection, which can be beneficial for maintaining a consistent encoding strategy across varying content.</li></ul><p>This software-based approach, while more CPU-intensive, grants the flexibility needed for precise control over video quality and file size, making it an excellent choice for projects requiring dynamic frame rate adjustments.</p><h3 id=-tweaking-the-defaults>üõ†Ô∏è Tweaking the Defaults<a hidden class=anchor aria-hidden=true href=#-tweaking-the-defaults>#</a></h3><p>Setting a keyframe interval is crucial for maintaining detailed captures, especially over long periods. I set mine to every 5 minutes. The <code>faststart</code> flag ensures that video metadata is positioned at the beginning for quick playback startup:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ffmpeg -f avfoundation -i <span class=s2>&#34;1&#34;</span> -framerate 0.5 -s hd1080 -c:v hevc_videotoolbox -g <span class=m>150</span> -fps_mode vfr -b:v 2K -maxrate 2K -bufsize 8K -movflags +faststart output.mp4
</span></span></code></pre></div><h3 id=-going-grayscale-for-extra-savings>üåì Going Grayscale for Extra Savings<a hidden class=anchor aria-hidden=true href=#-going-grayscale-for-extra-savings>#</a></h3><p>Since I mostly code in a light theme, converting the video to grayscale seemed like a smart move to further reduce file size:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ffmpeg -f avfoundation -i <span class=s2>&#34;1&#34;</span> -framerate 0.5 -vf <span class=s2>&#34;format=gray,scale=-1:1080&#34;</span> -c:v hevc_videotoolbox -g <span class=m>150</span> -fps_mode vfr -b:v 2K -maxrate 2K -bufsize 8K -movflags +faststart output.mp4
</span></span></code></pre></div><ol><li><strong>Reduced File Size</strong>: By eliminating color information, the video file size is significantly reduced. This is particularly beneficial for long recording sessions where storage space can become a concern.</li><li><strong>Resource Efficiency</strong>: Grayscale conversion is less resource-intensive compared to other color adjustments. This means less CPU and memory usage during the encoding process.</li><li><strong>Visual Clarity</strong>: For coding sessions, where the primary focus is on text and static details, grayscale is sufficient. It ensures that the essential details remain clear and visible without the need for full-color video.</li></ol><h4 id=combining-scaling-with-grayscale-conversion>Combining Scaling with Grayscale Conversion<a hidden class=anchor aria-hidden=true href=#combining-scaling-with-grayscale-conversion>#</a></h4><p>By combining scaling with grayscale conversion in the filtering stage, we streamline the encoding process, making it more efficient. Here&rsquo;s how:</p><ul><li><strong>Scaling</strong>: Reducing the resolution of the video to 1080p ensures that the file size is manageable while maintaining sufficient detail for readability. This is particularly important for screen recordings where text clarity is crucial.</li><li><strong>Grayscale Conversion</strong>: The <code>format=gray</code> filter simplifies the video by removing color information, which not only reduces the file size but also speeds up the encoding process.</li></ul><p><em>Code Commentary</em></p><ul><li><strong><code>-vf "format=gray,scale=-1:1080"</code></strong>: This part of the command applies the grayscale filter and scales the video to 1080p.</li><li><strong><code>-c:v hevc_videotoolbox</code></strong>: Utilizes Apple&rsquo;s hardware acceleration for efficient encoding.</li><li><strong><code>-b:v 2K -maxrate 2K -bufsize 8K</code></strong>: These parameters control the bitrate and buffer size, ensuring a balance between quality and file size.</li><li><strong><code>-movflags +faststart</code></strong>: Ensures that the video metadata is positioned at the beginning of the file for quick playback startup.</li></ul><p>By integrating these techniques, we achieve a highly efficient and resource-friendly screen recording setup that meets the specific needs of coding sessions. This approach not only saves on disk space but also ensures that the essential details remain clear and visible without the need for full-color video.</p><h3 id=-optimizing-output-frame-rate>üõ†Ô∏è Optimizing Output Frame Rate<a hidden class=anchor aria-hidden=true href=#-optimizing-output-frame-rate>#</a></h3><p>The <code>-r</code> flag is typically used to control the output frame rate, but it can result in a high amount of data being processed. To manage this more efficiently, we need to focus on the filter stage, which is controlled by the <code>-vf</code> (video filter) option.</p><p>By using the <code>-vf</code> option, we can precisely control the frame rate during the filtering stage, ensuring that only the necessary frames are processed. This approach reduces the load on the system and optimizes the overall encoding process.</p><p>Here&rsquo;s the command that achieves this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ffmpeg -f avfoundation -i <span class=s2>&#34;1&#34;</span> -framerate 0.5 -vf <span class=s2>&#34;fps=0.5,format=gray,scale=-1:1080&#34;</span> -fps_mode vfr -c:v hevc_videotoolbox -b:v 2K -maxrate 2K -bufsize 8K -movflags +faststart output.mp4
</span></span></code></pre></div><p><em>Code Commentary</em></p><ul><li><strong><code>-vf "fps=0.5,format=gray,scale=-1:1080"</code></strong>: This part of the command applies multiple filters:<ul><li><strong><code>fps=0.5</code></strong>: Captures one frame every two seconds, significantly reducing the amount of data processed.</li><li><strong><code>format=gray</code></strong>: Converts the video to grayscale, reducing file size and processing load.</li><li><strong><code>scale=-1:1080</code></strong>: Scales the video to 1080p, ensuring a balance between quality and file size.</li></ul></li><li><strong><code>-fps_mode vfr</code></strong>: Enables variable frame rate mode, which is more efficient for screen recordings with varying content.</li><li><strong><code>-c:v hevc_videotoolbox</code></strong>: Utilizes Apple&rsquo;s hardware acceleration for efficient encoding.</li><li><strong><code>-b:v 2K -maxrate 2K -bufsize 8K</code></strong>: These parameters control the bitrate and buffer size, ensuring a balance between quality and file size.</li><li><strong><code>-movflags +faststart</code></strong>: Ensures that the video metadata is positioned at the beginning of the file for quick playback startup.</li></ul><p>By implementing these optimizations, we can achieve a more efficient and resource-friendly screen recording setup. This approach not only reduces the load on the system but also ensures that the essential details remain clear and visible, making it ideal for coding sessions and other screen recording tasks.</p><h3 id=-enhancing-input-flow-for-hardware-decoding>üîß Enhancing Input Flow for Hardware Decoding<a hidden class=anchor aria-hidden=true href=#-enhancing-input-flow-for-hardware-decoding>#</a></h3><p>To optimize the input flow and leverage hardware decoding, we made some crucial adjustments to the ffmpeg command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ffmpeg -f avfoundation -framerate 0.5 -pixel_format nv12 -i <span class=s2>&#34;2:none&#34;</span> -vf <span class=s2>&#34;fps=0.5,format=gray,scale=-1:1080&#34;</span> -fps_mode vfr -c:v hevc_videotoolbox -b:v 2K -maxrate 2K -bufsize 8K -movflags +faststart output.mp4
</span></span></code></pre></div><ul><li><p>Key Adjustments</p><ol><li><strong>Pixel Format</strong>:</li></ol><ul><li><strong><code>-pixel_format nv12</code></strong>: We chose <code>nv12</code> because it is compatible with hardware acceleration. This format ensures that the video processing is optimized for performance, reducing the load on the CPU and taking advantage of the GPU.</li></ul><ol start=2><li><strong>Input Source</strong>:</li></ol><ul><li><strong><code>-i "2:none"</code></strong>: This specifies that the second device is used for video capture, and no audio is captured. This is particularly useful for screen recording where audio is not required, further reducing the processing load.</li></ul></li><li><p>Listing Available Devices
To identify the correct input device, you can list all available devices using the following command:</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ffmpeg -f avfoundation -list_devices <span class=nb>true</span> -i <span class=s2>&#34;&#34;</span>
</span></span></code></pre></div><p>This command will display a list of all video and audio capture devices connected to your system, allowing you to select the appropriate device for your recording needs.</p><h3 id=-optimizing-the-output-stream>üìà Optimizing the Output Stream<a hidden class=anchor aria-hidden=true href=#-optimizing-the-output-stream>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ffmpeg -f avfoundation -framerate 0.5 -pixel_format nv12 -i <span class=s2>&#34;2:none&#34;</span> -vf <span class=s2>&#34;fps=0.5,format=gray,scale=-1:1080&#34;</span> -fps_mode -an vfr -c:v hevc_videotoolbox -b:v 2K -maxrate 2K -bufsize 8K -movflags +faststart output.mp4
</span></span></code></pre></div><p><strong>Audio Handling</strong>:</p><ul><li><strong><code>-an</code></strong>: Ensures that no audio track is included in the output. This is useful for screen recordings where audio is not needed, further reducing the file size and processing requirements.</li></ul><h3 id=-enhancing-video-quality>üé• Enhancing Video Quality<a hidden class=anchor aria-hidden=true href=#-enhancing-video-quality>#</a></h3><p>To further improve the video quality, we made several key adjustments to the ffmpeg command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ffmpeg -f avfoundation -framerate 0.5 -pixel_format nv12 -i <span class=s2>&#34;2:none&#34;</span> -vf <span class=s2>&#34;fps=0.5,format=gray,scale=-1:1080,setrange=full,unsharp=5:5:1.3,format=yuv420p&#34;</span> -fps_mode -an vfr -c:v hevc_videotoolbox -b:v 2K -maxrate 2K -bufsize 8K -movflags +faststart output.mp4
</span></span></code></pre></div><ul><li>Key Adjustments and Their Importance
The changes and the order in the <code>-vf</code> (video filter) flag are crucial. The order defines the linear execution flow, ensuring that each step is processed correctly and efficiently. Here&rsquo;s a detailed breakdown:</li></ul><ol><li><strong>Frame Rate Control</strong>:<ul><li><strong><code>fps=0.5</code></strong>: This ensures that only one frame every two seconds is processed, regardless of the input device&rsquo;s frame rate. This significantly reduces the amount of data processed, optimizing the workflow.</li></ul></li><li><strong>Grayscale Conversion</strong>:<ul><li><strong><code>format=gray</code></strong>: Converts the video to grayscale, removing extra color channels. This step reduces the file size and processing load, making the encoding process more efficient.</li></ul></li><li><strong>Scaling</strong>:<ul><li><strong><code>scale=-1:1080</code></strong>: Scales the video to 1080p, ensuring a balance between quality and file size. This is particularly important for screen recordings where text clarity is crucial.</li></ul></li><li><strong>Color Range Adjustment</strong>:<ul><li><strong><code>setrange=full</code></strong>: This step is a prerequisite for the unsharp filter. It ensures that the full color range is used, which is necessary for the subsequent sharpening process.</li></ul></li><li><strong>Sharpening</strong>:<ul><li><strong><code>unsharp=5:5:1.3</code></strong>: This filter improves text legibility by sharpening the video. This is particularly useful for screen recordings where clear text is essential.</li></ul></li><li><strong>Final Format Conversion</strong>:<ul><li><strong><code>format=yuv420p</code></strong>: Converts the video to a format supported by the hardware encoder. This step ensures compatibility and efficient encoding.</li></ul></li></ol><ul><li>Importance of Filter Order
The order of the filters in the <code>-vf</code> flag is critical because each filter processes the output of the previous one. This linear execution flow ensures that each step is applied correctly and efficiently:<ul><li><strong>First</strong>, the frame rate is reduced to ensure that only the necessary frames are processed.</li><li><strong>Next</strong>, the video is converted to grayscale, simplifying the data and reducing the file size.</li><li><strong>Then</strong>, the video is scaled to the desired resolution, ensuring clarity and manageability.</li><li><strong>After that</strong>, the color range is adjusted to prepare for sharpening.</li><li><strong>Subsequently</strong>, the sharpening filter is applied to enhance text legibility.</li><li><strong>Finally</strong>, the video is converted to a format supported by the hardware encoder, ensuring efficient encoding.</li></ul></li></ul><h3 id=-making-the-recording-resilient-to-interruptions>üõ°Ô∏è Making the Recording Resilient to Interruptions<a hidden class=anchor aria-hidden=true href=#-making-the-recording-resilient-to-interruptions>#</a></h3><p>To ensure that our screen recording process is resilient to interruptions, such as system crashes or unexpected shutdowns, we made several key adjustments to the ffmpeg command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ffmpeg -f avfoundation -framerate 0.5 -pixel_format nv12 -i <span class=s2>&#34;2:none&#34;</span> -vf <span class=s2>&#34;fps=0.5,format=gray,scale=-1:1080,setrange=full,unsharp=5:5:1.3,format=yuv420p&#34;</span> -fps_mode vfr -an -c:v hevc_videotoolbox -b:v 2K -maxrate 2K -bufsize 8K -movflags +frag_keyframe+empty_moov+default_base_moof -g <span class=m>150</span> -f segment -segment_time <span class=m>3600</span> -reset_timestamps <span class=m>1</span> -strftime <span class=m>1</span> <span class=s2>&#34;%Y-%m-%d_%H-%M-%S_%A_%B_%d.mp4&#34;</span>
</span></span></code></pre></div><ol><li><strong>MOV Flags</strong>:</li></ol><ul><li><strong><code>-movflags +frag_keyframe+empty_moov+default_base_moof</code></strong>: These flags are crucial for making the recording process more resilient:<ul><li><strong><code>+frag_keyframe</code></strong>: Creates a fragment at each keyframe, ensuring that the video can be played back even if the recording is interrupted.</li><li><strong><code>+empty_moov</code></strong>: Writes an empty moov atom at the beginning of the file for compatibility, which is essential for fragmented MP4 files.</li><li><strong><code>+default_base_moof</code></strong>: Uses the default base data offset for movie fragments, ensuring proper playback in fragmented MP4 files.
These flags help create internal segments at the start of each keyframe. If ffmpeg gets interrupted, only the last segment from the last keyframe to the time of interruption will get corrupted. This means a maximum of 5 minutes of recording will be lost, which is an acceptable trade-off for most use cases.</li></ul></li></ul><ol start=2><li><strong>Segmenting the Recording</strong>:</li></ol><ul><li><strong><code>-f segment -segment_time 3600 -reset_timestamps 1 -strftime 1 "%Y-%m-%d_%H-%M-%S_%A_%B_%d.mp4"</code></strong>: This option segments the recording into new files every hour. This approach ensures that if an interruption or corruption occurs, it will only affect the last file, minimizing data loss.</li></ul><h2 id=-my-setup>‚öôÔ∏è My Setup<a hidden class=anchor aria-hidden=true href=#-my-setup>#</a></h2><p>As an avid <a href=https://www.alfredapp.com/>Alfred</a> user, I prefer to streamline my workflow rather than manually setting up and controlling the recording process via the terminal each time. To achieve this, I created a custom Alfred workflow with three essential commands.</p><h3 id=-start-recording>üöÄ Start Recording<a hidden class=anchor aria-hidden=true href=#-start-recording>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=nv>query</span><span class=o>=</span><span class=nv>$1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Function to convert a string to camel case and make it safe for file names</span>
</span></span><span class=line><span class=cl>to_camel_case<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>input</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=c1># Replace non-alphanumeric characters with spaces</span>
</span></span><span class=line><span class=cl>    <span class=nv>input</span><span class=o>=</span><span class=k>$(</span><span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$input</span><span class=s2>&#34;</span> <span class=p>|</span> sed -r <span class=s1>&#39;s/[^a-zA-Z0-9]+/ /g&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># Convert to lowercase</span>
</span></span><span class=line><span class=cl>    <span class=nv>input</span><span class=o>=</span><span class=k>$(</span><span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$input</span><span class=s2>&#34;</span> <span class=p>|</span> tr <span class=s1>&#39;[:upper:]&#39;</span> <span class=s1>&#39;[:lower:]&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># Capitalize the first letter of each word</span>
</span></span><span class=line><span class=cl>    <span class=nv>input</span><span class=o>=</span><span class=k>$(</span><span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$input</span><span class=s2>&#34;</span> <span class=p>|</span> awk <span class=s1>&#39;{for(i=1;i&lt;=NF;i++) $i=toupper(substr($i,1,1)) tolower(substr($i,2))} 1&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># Remove spaces to form a camel case string</span>
</span></span><span class=line><span class=cl>    <span class=nv>input</span><span class=o>=</span><span class=k>$(</span><span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$input</span><span class=s2>&#34;</span> <span class=p>|</span> tr -d <span class=s1>&#39; &#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># Remove any remaining special characters to make it safe for file names</span>
</span></span><span class=line><span class=cl>    <span class=nv>input</span><span class=o>=</span><span class=k>$(</span><span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$input</span><span class=s2>&#34;</span> <span class=p>|</span> sed -r <span class=s1>&#39;s/[^a-zA-Z0-9]//g&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$input</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check if query is not empty</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> ! -z <span class=s2>&#34;</span><span class=nv>$query</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nv>camel_case_query</span><span class=o>=</span><span class=k>$(</span>to_camel_case <span class=s2>&#34;</span><span class=nv>$query</span><span class=s2>&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>    <span class=nv>file_postfix</span><span class=o>=</span><span class=s2>&#34;_</span><span class=si>${</span><span class=nv>camel_case_query</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nv>file_postfix</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Directory to store PID file and recordings</span>
</span></span><span class=line><span class=cl><span class=nv>WORKFLOW_DATA_DIR</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$alfred_workflow_data</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>PID_FILE</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$WORKFLOW_DATA_DIR</span><span class=s2>/ffmpeg.pid&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>RECORDING_DIR</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$WORKFLOW_DATA_DIR</span><span class=s2>/recording&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LOG_FILE</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$WORKFLOW_DATA_DIR</span><span class=s2>/start_ffmpeg.log&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create the recording directory if it doesn&#39;t exist</span>
</span></span><span class=line><span class=cl>mkdir -p <span class=s2>&#34;</span><span class=nv>$RECORDING_DIR</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Clear the log file</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;&#34;</span> &gt; <span class=s2>&#34;</span><span class=nv>$LOG_FILE</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Log a message</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Starting ffmpeg script...&#34;</span> &gt;&gt; <span class=s2>&#34;</span><span class=nv>$LOG_FILE</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check if the PID file exists and if the process is running</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> -f <span class=s2>&#34;</span><span class=nv>$PID_FILE</span><span class=s2>&#34;</span> <span class=o>]</span> <span class=o>&amp;&amp;</span> <span class=nb>kill</span> -0 <span class=k>$(</span>cat <span class=s2>&#34;</span><span class=nv>$PID_FILE</span><span class=s2>&#34;</span><span class=k>)</span> 2&gt;/dev/null<span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;ffmpeg is already running.&#34;</span> &gt;&gt; <span class=s2>&#34;</span><span class=nv>$LOG_FILE</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;ffmpeg is already running.&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>1</span>  <span class=c1># Return code 1 indicates ffmpeg is already running</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Start the ffmpeg process in the background using nohup and save the PID</span>
</span></span><span class=line><span class=cl>nohup ffmpeg -f avfoundation -framerate 0.5 -pixel_format nv12 -i <span class=s2>&#34;2:none&#34;</span> -vf <span class=s2>&#34;fps=0.5,format=gray,scale=-1:1080,setrange=full,unsharp=5:5:1.3,format=yuv420p&#34;</span> -fps_mode vfr -an -c:v hevc_videotoolbox -b:v 2K -maxrate 2K -bufsize 8K -movflags +frag_keyframe+empty_moov+default_base_moof -g <span class=m>150</span> -f segment -segment_time <span class=m>3600</span> -reset_timestamps <span class=m>1</span> -strftime <span class=m>1</span> <span class=s2>&#34;</span><span class=nv>$RECORDING_DIR</span><span class=s2>/%Y-%m-%d_%H-%M-%S_%A_%B_%d</span><span class=si>${</span><span class=nv>file_prefix</span><span class=si>}</span><span class=s2>.mp4&#34;</span> &gt; /dev/null 2&gt;<span class=p>&amp;</span><span class=m>1</span> <span class=p>&amp;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>FFMPEG_PID</span><span class=o>=</span><span class=nv>$!</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=nv>$FFMPEG_PID</span> &gt; <span class=s2>&#34;</span><span class=nv>$PID_FILE</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;ffmpeg started with PID </span><span class=nv>$FFMPEG_PID</span><span class=s2>.&#34;</span> &gt;&gt; <span class=s2>&#34;</span><span class=nv>$LOG_FILE</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;ffmpeg started with PID </span><span class=nv>$FFMPEG_PID</span><span class=s2>.&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>exit</span> <span class=m>0</span>  <span class=c1># Return code 0 indicates success</span>
</span></span></code></pre></div><p><em>Code Commentary</em></p><ol><li><strong><code>nohup</code></strong>: Ensures the ffmpeg process ignores hangup signals and continues running even after the script exits.</li><li><strong>Output Redirection</strong>: <code>> /dev/null 2>&amp;1</code> ensures that the output of the ffmpeg process does not interfere with the script and is discarded.</li><li><strong>Background Process</strong>: The <code>&</code> at the end of the command starts the command as a background process.</li><li><strong>Save PID</strong>: The PID of the ffmpeg process is captured using <code>$!</code> and saved to a file.</li><li><strong>Logging</strong>: The script logs messages to the log file and outputs the PID to Alfred.</li></ol><h3 id=-stop-recording>üõë Stop Recording<a hidden class=anchor aria-hidden=true href=#-stop-recording>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1># Directory to store PID file</span>
</span></span><span class=line><span class=cl><span class=nv>WORKFLOW_DATA_DIR</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$alfred_workflow_data</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>PID_FILE</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$WORKFLOW_DATA_DIR</span><span class=s2>/ffmpeg.pid&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check if the PID file exists and if the process is running</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> -f <span class=s2>&#34;</span><span class=nv>$PID_FILE</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nv>FFMPEG_PID</span><span class=o>=</span><span class=k>$(</span>cat <span class=s2>&#34;</span><span class=nv>$PID_FILE</span><span class=s2>&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nb>kill</span> -0 <span class=nv>$FFMPEG_PID</span> 2&gt;/dev/null<span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=nb>kill</span> -SIGINT <span class=nv>$FFMPEG_PID</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;ffmpeg process </span><span class=nv>$FFMPEG_PID</span><span class=s2> stopped.&#34;</span>
</span></span><span class=line><span class=cl>        rm <span class=s2>&#34;</span><span class=nv>$PID_FILE</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>exit</span> <span class=m>0</span>  <span class=c1># Return code 0 indicates success</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;ffmpeg process not running, cleaning up.&#34;</span>
</span></span><span class=line><span class=cl>        rm <span class=s2>&#34;</span><span class=nv>$PID_FILE</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>exit</span> <span class=m>1</span>  <span class=c1># Return code 1 indicates the process was not running</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;No ffmpeg process running.&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>1</span>  <span class=c1># Return code 1 indicates no PID file found</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><h3 id=-open-recording-directory>üìÇ Open Recording Directory<a hidden class=anchor aria-hidden=true href=#-open-recording-directory>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1># Directory to open in Finder</span>
</span></span><span class=line><span class=cl><span class=nv>RECORDING_DIR</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$alfred_workflow_data</span><span class=s2>/recording&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create the recording directory if it doesn&#39;t exist</span>
</span></span><span class=line><span class=cl>mkdir -p <span class=s2>&#34;</span><span class=nv>$RECORDING_DIR</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Open the recording directory in Finder</span>
</span></span><span class=line><span class=cl>open <span class=s2>&#34;</span><span class=nv>$RECORDING_DIR</span><span class=s2>&#34;</span>
</span></span></code></pre></div><p>By integrating these commands into an Alfred workflow, I can easily start, stop, and access my screen recordings without having to manually enter commands in the terminal. This setup not only saves time but also ensures a seamless recording experience.</p><h2 id=-reflecting-on-the-journey>üåü Reflecting on the Journey<a hidden class=anchor aria-hidden=true href=#-reflecting-on-the-journey>#</a></h2><p>Embarking on this adventure with ffmpeg and ChatGPT has not only addressed my screen recording requirements but also opened up a whole new world of video processing insights. ffmpeg stands out as an incredibly versatile toolkit for anyone interested in multimedia, offering a wide range of possibilities for both novices and experts. It&rsquo;s an invitation to explore, experiment, and enhance your skills.</p><h3 id=key-takeaways>Key Takeaways<a hidden class=anchor aria-hidden=true href=#key-takeaways>#</a></h3><ol><li><p><strong>Optimizing Screen Recording</strong>:</p><ul><li>By leveraging ffmpeg&rsquo;s powerful command-line capabilities, we optimized screen recording on macOS, focusing on efficiency and quality. Techniques such as grayscale conversion, frame rate control, hardware decoding, and output stream optimization were crucial in achieving a resource-friendly setup.</li></ul></li><li><p><strong>Enhancing Video Quality</strong>:</p><ul><li>We implemented advanced filters and settings to ensure high-quality recordings. The importance of filter order was highlighted, ensuring each step in the video processing pipeline was executed correctly and efficiently.</li></ul></li><li><p><strong>Resilience to Interruptions</strong>:</p><ul><li>By adding specific MOV flags and segmenting the recording, we made the recording process resilient to interruptions. This approach minimizes data loss and ensures the majority of the recording remains intact.</li></ul></li><li><p><strong>Streamlined Workflow with Alfred</strong>:</p><ul><li>As an avid Alfred user, I created a custom workflow to start, stop, and access recordings seamlessly. This setup saves time and ensures a smooth recording experience without manual terminal commands.</li></ul></li></ol><h3 id=future-plans>Future Plans<a hidden class=anchor aria-hidden=true href=#future-plans>#</a></h3><p>This experience has also solidified my intention to integrate GPT as a collaborative programming companion. In pursuit of this, I plan to leverage the following tools:</p><ul><li><strong>Cursor from Cursor.so</strong>: As an enthusiastic Visual Studio Code user, I find Cursor&rsquo;s addition of simple, GPT-friendly interfaces to be a game-changer, making it easier to interact with GPT during coding sessions.</li><li><strong>ChatGPT 4.0 and GPT-4</strong>: These advanced iterations of GPT promise to revolutionize the way I approach problem-solving and coding, offering unparalleled assistance and insights.</li></ul><h3 id=final-thoughts>Final Thoughts<a hidden class=anchor aria-hidden=true href=#final-thoughts>#</a></h3><p>This journey has been a testament to the power of combining cutting-edge tools and technologies to push the boundaries of what&rsquo;s possible in programming and video editing. By integrating ffmpeg&rsquo;s robust capabilities with the advanced assistance of ChatGPT, we have created a highly efficient and effective screen recording setup tailored for coding sessions and beyond.</p><p>The exploration and experimentation with these tools have not only enhanced my technical skills but also opened up new avenues for creative and efficient workflows. I look forward to continuing this journey, leveraging the latest advancements in technology to further refine and optimize my processes.</p><p>Thank you for joining me on this deep dive into screen recording with ffmpeg and ChatGPT. I hope you found these insights and techniques as valuable and exciting as I did. Happy recording!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://keyboardgonerogue.com/tags/build/>Build</a></li><li><a href=https://keyboardgonerogue.com/tags/rabbit-hole/>Rabbit-Hole</a></li><li><a href=https://keyboardgonerogue.com/tags/tool/>Tool</a></li></ul><nav class=paginav><a class=next href=https://keyboardgonerogue.com/posts/rabbit-holes/how-to-build/><span class=title>Next ¬ª</span><br><span>How to Build</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Screen Recording on x" href="https://x.com/intent/tweet/?text=Screen%20Recording&amp;url=https%3a%2f%2fkeyboardgonerogue.com%2fposts%2frabbit-holes%2fscreen-recording%2f&amp;hashtags=build%2crabbit-hole%2ctool"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Screen Recording on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fkeyboardgonerogue.com%2fposts%2frabbit-holes%2fscreen-recording%2f&amp;title=Screen%20Recording&amp;summary=Screen%20Recording&amp;source=https%3a%2f%2fkeyboardgonerogue.com%2fposts%2frabbit-holes%2fscreen-recording%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Screen Recording on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fkeyboardgonerogue.com%2fposts%2frabbit-holes%2fscreen-recording%2f&title=Screen%20Recording"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Screen Recording on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fkeyboardgonerogue.com%2fposts%2frabbit-holes%2fscreen-recording%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Screen Recording on whatsapp" href="https://api.whatsapp.com/send?text=Screen%20Recording%20-%20https%3a%2f%2fkeyboardgonerogue.com%2fposts%2frabbit-holes%2fscreen-recording%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Screen Recording on telegram" href="https://telegram.me/share/url?text=Screen%20Recording&amp;url=https%3a%2f%2fkeyboardgonerogue.com%2fposts%2frabbit-holes%2fscreen-recording%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Screen Recording on ycombinator" href="https://news.ycombinator.com/submitlink?t=Screen%20Recording&u=https%3a%2f%2fkeyboardgonerogue.com%2fposts%2frabbit-holes%2fscreen-recording%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://keyboardgonerogue.com/>Keyboard Gone Rogue</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>